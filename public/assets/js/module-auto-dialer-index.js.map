{"version":3,"sources":["src/module-auto-dialer-index.js"],"names":["idUrl","idForm","className","inputClassName","baseUrl","window","location","protocol","hostname","port","ModuleAutoDialer","$formObj","$","$checkBoxes","$dropDowns","saveTableAJAXUrl","globalRootUrl","deleteRecordAJAXUrl","$disabilityFields","$statusToggle","$moduleStatus","$pollingTable","validateRules","initialize","removeClass","accordion","checkbox","dropdown","checkStatusToggle","addEventListener","initializeForm","tab","css","hash","initPollingTable","document","on","deletePollingRowClick","deleteExtensionRowClick","addPolling","addExtension","href","e","preventDefault","linkElement","ajax","url","attr","type","dataType","success","response","result","closest","remove","error","xhr","status","console","Extensions","cbOnDataChanged","dataTable","serverSide","processing","info","columnDefs","defaultContent","targets","origin","thrown","paging","sDom","deferRender","pageLength","calculatePageLength","createdRow","row","data","eq","html","crmId","id","name","buttons","globalTranslate","bt_ToolTipEdit","bt_ToolTipDelete","drawCallback","settings","pagination","find","_iDisplayLength","fnRecordsDisplay","hide","show","language","SemanticLocalization","dataTableLocalisation","ordering","rowHeight","first","outerHeight","windowHeight","innerHeight","headerFooterHeight","Math","max","floor","makeDropdownList","selectType","selected","values","value","each","index","obj","push","text","changeGroupInList","choice","tdInput","currentRowId","tableName","replace","undefined","sendChangesToServer","initTable","options","columns","columnsArray4Sort","colName","DataTable","ajaxUrl","dataSrc","infoCallback","start","end","total","pre","cols","headers","key","indexOf","templateDeleteButton","DT_RowId","addClass","template","additionalClass","header","selectMetaData","newTemplate","drowSelectGroup","sTableId","body","target","transition","keyCode","which","hasClass","endEditInput","deleteRow","addNewRow","cbOnDrop","table","priorityWasChanged","priorityData","ruleId","oldPriority","parseInt","newPriority","rowIndex","isNaN","api","method","$el","idTable","random","rowTemplate","before","tableId","selestGroup","onChange","tableDnD","onDrop","onDragClass","dragHandle","substr","onSuccess","length","append","recordId","notEmpty","val","successTest","Object","keys","rowId","onFailure","message","UserMessage","showMultiString","onError","errorMessage","element","applyConfigurationChanges","changeStatus","Config","pbxUrl","cbBeforeSendForm","form","cbAfterSendForm","Form","module_auto_dialerConnected","module_auto_dialerDisconnected","module_auto_dialerUpdateStatus","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 11 2018\n *\n */\nconst idUrl     = 'module-auto-dialer';\nconst idForm    = 'module-auto-dialer-form';\nconst className = 'ModuleAutoDialer';\nconst inputClassName = 'mikopbx-module-input';\nlet baseUrl = window.location.protocol + '//' + window.location.hostname;\nif (window.location.port) {\n\tbaseUrl += ':' + window.location.port;\n}\n/* global globalRootUrl, globalTranslate, Form, Config */\nconst ModuleAutoDialer = {\n\t$formObj: $('#'+idForm),\n\t$checkBoxes: $('#'+idForm+' .ui.checkbox'),\n\t$dropDowns: $('#'+idForm+' .ui.dropdown'),\n\tsaveTableAJAXUrl: globalRootUrl + idUrl + \"/saveTableData\",\n\tdeleteRecordAJAXUrl: globalRootUrl + idUrl + \"/delete\",\n\t$disabilityFields: $('#'+idForm+'  .disability'),\n\t$statusToggle: $('#module-status-toggle'),\n\t$moduleStatus: $('#status'),\n\n\t$pollingTable: $('#polling-table'),\n\t/**\n\t * Field validation rules\n\t * https://semantic-ui.com/behaviors/form.html\n\t */\n\tvalidateRules: {\n\t},\n\t/**\n\t * On page load we init some Semantic UI library\n\t */\n\tinitialize() {\n\t\t$('#content-frame').removeClass('segment');\n\t\t$('.ui.accordion').accordion();\n\t\t// инициализируем чекбоксы и выподающие менюшки\n\t\twindow[className].$checkBoxes.checkbox();\n\t\twindow[className].$dropDowns.dropdown();\n\t\twindow[className].checkStatusToggle();\n\t\twindow.addEventListener('ModuleStatusChanged', window[className].checkStatusToggle);\n\t\twindow[className].initializeForm();\n\t\t$('.menu .item').tab({\n\t\t\t'onVisible': (tab) => {\n\t\t\t\t$(`#polling-table th`).css('width', '')\n\t\t\t\t$(`#polling-table`).css('width', '')\n\t\t\t}\n\t\t});\n\t\tif(window.location.hash === '#extension'){\n\t\t\t$('.menu .item').tab(\"change tab\", 'extension');\n\t\t}\n\n\t\tModuleAutoDialer.initPollingTable();\n\n\t\t$(document).on('click', '#polling-table a.delete', ModuleAutoDialer.deletePollingRowClick);\n\t\t$(document).on('click', '#extensions-table a.delete', ModuleAutoDialer.deleteExtensionRowClick);\n\t\t$('#button-add').on('click', ModuleAutoDialer.addPolling);\n\t\t$('#button-exten-add').on('click', ModuleAutoDialer.addExtension);\n\t},\n\taddPolling(){\n\t\twindow.location.href = `${baseUrl}/admin-cabinet/module-auto-dialer/modifyPolling/`;\n\t},\n\taddExtension(){\n\t\twindow.location.href = `${baseUrl}/admin-cabinet/module-auto-dialer/modifyExtension/`;\n\t},\n\tdeletePollingRowClick(e){\n\t\te.preventDefault();\n\t\tlet linkElement = $(this);\n\n\t\t$.ajax({\n\t\t\turl: linkElement.attr('href'),\n\t\t\ttype: 'DELETE',\n\t\t\tdataType: 'json',\n\t\t\tsuccess: function(response) {\n\t\t\t\tif (response.result) {\n\t\t\t\t\tlinkElement.closest('tr').remove();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(xhr, status, error) {\n\t\t\t\tconsole.error(\"Ошибка при удалении: \" + error);\n\t\t\t}\n\t\t});\n\t},\n\tdeleteExtensionRowClick(e){\n\t\te.preventDefault();\n\t\tlet linkElement = $(this);\n\t\t$.ajax({\n\t\t\turl: linkElement.attr('href'),\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tsuccess: function(response) {\n\t\t\t\tif (response.success) {\n\t\t\t\t\tlinkElement.closest('tr').remove();\n\t\t\t\t}\n\t\t\t\tExtensions.cbOnDataChanged();\n\t\t\t},\n\t\t\terror: function(xhr, status, error) {\n\t\t\t\tconsole.error(\"Ошибка при удалении: \" + error);\n\t\t\t\tExtensions.cbOnDataChanged();\n\t\t\t}\n\t\t});\n\t},\n\tinitPollingTable(){\n\t\tModuleAutoDialer.$pollingTable.dataTable({\n\t\t\tserverSide: true,\n\t\t\tprocessing: true,\n\t\t\tinfo: false,\n\t\t\tcolumnDefs: [\n\t\t\t\t{ defaultContent: \"\",  targets: \"_all\"},\n\t\t\t],\n\t\t\tajax: {\n\t\t\t\turl: `${window.location.origin}/pbxcore/api/module-dialer/v1/polling`,\n\t\t\t\ttype: 'GET',\n\t\t\t\terror: function(xhr, error, thrown) {\n\t\t\t\t\tconsole.error('Ошибка при выполнении запроса:', error);\n\t\t\t\t}\n\t\t\t},\n\t\t\tpaging: true,\n\t\t\tsDom: 'rtip',\n\t\t\tdeferRender: true,\n\t\t\tpageLength: ModuleAutoDialer.calculatePageLength(),\n\t\t\tcreatedRow(row, data) {\n\t\t\t\t$('td', row).eq(0).html(data.crmId);\n\t\t\t\t$('td', row).eq(1).html(data.id);\n\t\t\t\t$('td', row).eq(2).html(data.name);\n\t\t\t\tlet buttons= `<div class=\"ui basic icon buttons action-buttons tiny\">`+\n\t\t\t\t\t`<a href=\"${globalRootUrl}${idUrl}/modifyPolling/${data.id}\" class=\"ui button edit popuped\" data-content=\"${globalTranslate.bt_ToolTipEdit}\"><i class=\"icon edit blue\"></i> </a>`+\n\t\t\t\t\t`<a href=\"${window.location.origin}/pbxcore/api/module-dialer/v1/polling/${data.id}\" class=\"ui button delete two-steps-delete popuped\" data-content=\"${globalTranslate.bt_ToolTipDelete}\"><i class=\"icon trash red\"></i> </a>`+\n\t\t\t\t\t`</div>`;\n\t\t\t\t$('td', row).eq(3).html(buttons);\n\t\t\t},\n\t\t\tdrawCallback(settings) {\n\t\t\t\tlet pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');\n\t\t\t\tif (settings._iDisplayLength >= settings.fnRecordsDisplay()) {\n\t\t\t\t\tpagination.hide();\n\t\t\t\t} else {\n\t\t\t\t\tpagination.show();\n\t\t\t\t}\n\t\t\t},\n\t\t\tlanguage: SemanticLocalization.dataTableLocalisation,\n\t\t\tordering: false,\n\t\t});\n\t},\n\n\tcalculatePageLength() {\n\t\tlet rowHeight = ModuleAutoDialer.$pollingTable.find('tbody > tr').first().outerHeight();\n\t\tconst windowHeight = window.innerHeight;\n\t\tconst headerFooterHeight = 400 ;\n\t\treturn Math.max(Math.floor((windowHeight - headerFooterHeight) / rowHeight), 5);\n\t},\n\t/**\n\t * Подготавливает список выбора\n\t * @param selected\n\t * @returns {[]}\n\t */\n\tmakeDropdownList(selectType, selected) {\n\t\tconst values = [\n\t\t\t{\n\t\t\t\tname: ' --- ',\n\t\t\t\tvalue: '',\n\t\t\t\tselected: ('' === selected),\n\t\t\t}\n\t\t];\n\t\t$('#'+selectType+' option').each((index, obj) => {\n\t\t\tvalues.push({\n\t\t\t\tname: obj.text,\n\t\t\t\tvalue: obj.value,\n\t\t\t\tselected: (selected === obj.value),\n\t\t\t});\n\t\t});\n\t\treturn values;\n\t},\n\t/**\n\t * Обработка изменения группы в списке\n\t */\n\tchangeGroupInList(value, text, choice) {\n\t\tlet tdInput = $(choice).closest('td').find('input');\n\t\ttdInput.attr('data-value', \tvalue);\n\t\ttdInput.attr('value', \t\tvalue);\n\t\tlet currentRowId = $(choice).closest('tr').attr('id');\n\t\tlet tableName    = $(choice).closest('table').attr('id').replace('-table', '');\n\t\tif (currentRowId !== undefined && tableName !== undefined) {\n\t\t\twindow[className].sendChangesToServer(tableName, currentRowId);\n\t\t}\n\t},\n\n\t/**\n\t * Add new Table.\n\t */\n\tinitTable(tableName, options) {\n\t\tlet columns = [];\n\t\tlet columnsArray4Sort = []\n\t\tfor (let colName in options['cols']) {\n\t\t\tcolumns.push( {data: colName});\n\t\t\tcolumnsArray4Sort.push(colName);\n\t\t}\n\t\t$('#' + tableName).DataTable( {\n\t\t\tajax: {\n\t\t\t\turl: idUrl + options.ajaxUrl + '?table=' +tableName.replace('-table', ''),\n\t\t\t\tdataSrc: 'data'\n\t\t\t},\n\t\t\tcolumns: columns,\n\t\t\tpaging: true,\n\t\t\tsDom: 'rtip',\n\t\t\tdeferRender: true,\n\t\t\tpageLength: 17,\n\t\t\tinfoCallback( settings, start, end, max, total, pre ) {\n\t\t\t\treturn '';\n\t\t\t},\n\t\t\tlanguage: SemanticLocalization.dataTableLocalisation,\n\t\t\tordering: false,\n\t\t\t/**\n\t\t\t * Builder row presentation\n\t\t\t * @param row\n\t\t\t * @param data\n\t\t\t */\n\t\t\tcreatedRow(row, data) {\n\t\t\t\tlet cols    = $('td', row);\n\t\t\t\tlet headers = $('#'+ tableName + ' thead tr th');\n\t\t\t\tfor (let key in data) {\n\t\t\t\t\tlet index = columnsArray4Sort.indexOf(key);\n\t\t\t\t\tif(key === 'rowIcon'){\n\t\t\t\t\t\tcols.eq(index).html('<i class=\"ui ' + data[key] + ' circle icon\"></i>');\n\t\t\t\t\t}else if(key === 'delButton'){\n\t\t\t\t\t\tlet templateDeleteButton = '<div class=\"ui small basic icon buttons action-buttons\">' +\n\t\t\t\t\t\t\t'<a href=\"' + window[className].deleteRecordAJAXUrl + '/' +\n\t\t\t\t\t\t\tdata.id + '\" data-value = \"' + data.DT_RowId + '\"' +\n\t\t\t\t\t\t\t' class=\"ui button delete two-steps-delete popuped\" data-content=\"' + globalTranslate.bt_ToolTipDelete + '\">' +\n\t\t\t\t\t\t\t'<i class=\"icon trash red\"></i></a></div>';\n\t\t\t\t\t\tcols.eq(index).html(templateDeleteButton);\n\t\t\t\t\t}else if(key === 'priority'){\n\t\t\t\t\t\tcols.eq(index).addClass('dragHandle')\n\t\t\t\t\t\tcols.eq(index).html('<i class=\"ui sort circle icon\"></i>');\n\t\t\t\t\t\t// Приоритет устанавливаем для строки.\n\t\t\t\t\t\t$(row).attr('m-priority', data[key]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlet template = '<div class=\"ui transparent fluid input inline-edit\">' +\n\t\t\t\t\t\t\t'<input colName=\"'+key+'\" class=\"'+inputClassName+'\" type=\"text\" data-value=\"'+data[key] + '\" value=\"' + data[key] + '\"></div>';\n\t\t\t\t\t\t$('td', row).eq(index).html(template);\n\t\t\t\t\t}\n\t\t\t\t\tif(options['cols'][key] === undefined){\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tlet additionalClass = options['cols'][key]['class'];\n\t\t\t\t\tif(additionalClass !== undefined && additionalClass !== ''){\n\t\t\t\t\t\theaders.eq(index).addClass(additionalClass);\n\t\t\t\t\t}\n\t\t\t\t\tlet header = options['cols'][key]['header'];\n\t\t\t\t\tif(header !== undefined && header !== ''){\n\t\t\t\t\t\theaders.eq(index).html(header);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet selectMetaData = options['cols'][key]['select'];\n\t\t\t\t\tif(selectMetaData !== undefined){\n\t\t\t\t\t\tlet newTemplate = $('#template-select').html().replace('PARAM', data[key]);\n\t\t\t\t\t\tlet template = '<input class=\"'+inputClassName+'\" colName=\"'+key+'\" selectType=\"'+selectMetaData+'\" style=\"display: none;\" type=\"text\" data-value=\"'+data[key] + '\" value=\"' + data[key] + '\"></div>';\n\t\t\t\t\t\tcols.eq(index).html(newTemplate + template);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Draw event - fired once the table has completed a draw.\n\t\t\t */\n\t\t\tdrawCallback(settings) {\n\t\t\t\twindow[className].drowSelectGroup(settings.sTableId);\n\t\t\t},\n\t\t} );\n\n\t\tlet body = $('body');\n\t\t// Клик по полю. Вход для редактирования значения.\n\t\tbody.on('focusin', '.'+inputClassName, function (e) {\n\t\t\t$(e.target).transition('glow');\n\t\t\t$(e.target).closest('div').removeClass('transparent').addClass('changed-field');\n\t\t\t$(e.target).attr('readonly', false);\n\t\t})\n\t\t// Отправка формы на сервер по Enter или Tab\n\t\t$(document).on('keydown', function (e) {\n\t\t\tlet keyCode = e.keyCode || e.which;\n\t\t\tif (keyCode === 13 || keyCode === 9 && $(':focus').hasClass('mikopbx-module-input')) {\n\t\t\t\twindow[className].endEditInput();\n\t\t\t}\n\t\t});\n\n\t\tbody.on('click', 'a.delete', function (e) {\n\t\t\te.preventDefault();\n\t\t\tlet currentRowId = $(e.target).closest('tr').attr('id');\n\t\t\tlet tableName    = $(e.target).closest('table').attr('id').replace('-table', '');\n\t\t\twindow[className].deleteRow(tableName, currentRowId);\n\t\t}); // Добавление новой строки\n\n\t\t// Отправка формы на сервер по уходу с поля ввода\n\t\tbody.on('focusout', '.'+inputClassName, window[className].endEditInput);\n\n\t\t// Кнопка \"Добавить новую запись\"\n\t\t$('[id-table = \"'+tableName+'\"]').on('click', window[className].addNewRow);\n\t},\n\n\t/**\n\t * Перемещение строки, изменение приоритета.\n\t */\n\tcbOnDrop(table, row) {\n\t\tlet priorityWasChanged = false;\n\t\tconst priorityData = {};\n\t\t$(table).find('tr').each((index, obj) => {\n\t\t\tconst ruleId = $(obj).attr('id');\n\t\t\tconst oldPriority = parseInt($(obj).attr('m-priority'), 10);\n\t\t\tconst newPriority = obj.rowIndex;\n\t\t\tif (!isNaN( ruleId ) && oldPriority !== newPriority) {\n\t\t\t\tpriorityWasChanged = true;\n\t\t\t\tpriorityData[ruleId] = newPriority;\n\t\t\t}\n\t\t});\n\t\tif (priorityWasChanged) {\n\t\t\t$.api({\n\t\t\t\ton: 'now',\n\t\t\t\turl: `${globalRootUrl}${idUrl}/changePriority?table=`+$(table).attr('id').replace('-table', ''),\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: priorityData,\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Окончание редактирования поля ввода.\n\t * Не относится к select.\n\t * @param e\n\t */\n\tendEditInput(e){\n\t\tlet $el = $('.changed-field').closest('tr');\n\t\t$el.each(function (index, obj) {\n\t\t\tlet currentRowId = $(obj).attr('id');\n\t\t\tlet tableName    = $(obj).closest('table').attr('id').replace('-table', '');\n\t\t\tif (currentRowId !== undefined && tableName !== undefined) {\n\t\t\t\twindow[className].sendChangesToServer(tableName, currentRowId);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Добавление новой строки в таблицу.\n\t * @param e\n\t */\n\taddNewRow(e){\n\t\tlet idTable = $(e.target).attr('id-table');\n\t\tlet table   = $('#'+idTable);\n\t\te.preventDefault();\n\t\ttable.find('.dataTables_empty').remove();\n\t\t// Отправим на запись все что не записано еще\n\t\tlet $el = table.find('.changed-field').closest('tr');\n\t\t$el.each(function (index, obj) {\n\t\t\tlet currentRowId = $(obj).attr('id');\n\t\t\tif (currentRowId !== undefined) {\n\t\t\t\twindow[className].sendChangesToServer(currentRowId);\n\t\t\t}\n\t\t});\n\t\tlet id = \"new\"+Math.floor(Math.random() * Math.floor(500));\n\t\tlet rowTemplate = '<tr id=\"'+id+'\" role=\"row\" class=\"even\">'+table.find('tr#TEMPLATE').html().replace('TEMPLATE', id)+'</tr>';\n\t\ttable.find('tbody > tr:first').before(rowTemplate);\n\t\twindow[className].drowSelectGroup(idTable);\n\t},\n\t/**\n\t * Обновление select элементов.\n\t * @param tableId\n\t */\n\tdrowSelectGroup(tableId) {\n\t\t$('#' + tableId).find('tr#TEMPLATE').hide();\n\t\tlet selestGroup = $('.select-group');\n\t\tselestGroup.each((index, obj) => {\n\t\t\tlet selectType = $(obj).closest('td').find('input').attr('selectType');\n\t\t\t$(obj).dropdown({\n\t\t\t\tvalues: window[className].makeDropdownList(selectType, $(obj).attr('data-value')),\n\t\t\t});\n\t\t});\n\t\tselestGroup.dropdown({\n\t\t\tonChange: window[className].changeGroupInList,\n\t\t});\n\n\t\t$('#' + tableId).tableDnD({\n\t\t\tonDrop: window[className].cbOnDrop,\n\t\t\tonDragClass: 'hoveringRow',\n\t\t\tdragHandle: '.dragHandle',\n\t\t});\n\t},\n\t/**\n\t * Удаление строки\n\t * @param tableName\n\t * @param id - record id\n\t */\n\tdeleteRow(tableName, id) {\n\t\tlet table = $('#'+ tableName+'-table');\n\t\tif (id.substr(0,3) === 'new') {\n\t\t\ttable.find('tr#'+id).remove();\n\t\t\treturn;\n\t\t}\n\t\t$.api({\n\t\t\turl: window[className].deleteRecordAJAXUrl+'?id='+id+'&table='+tableName,\n\t\t\ton: 'now',\n\t\t\tonSuccess(response) {\n\t\t\t\tif (response.success) {\n\t\t\t\t\ttable.find('tr#'+id).remove();\n\t\t\t\t\tif (table.find('tbody > tr').length === 0) {\n\t\t\t\t\t\ttable.find('tbody').append('<tr class=\"odd\"></tr>');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Отправка данных на сервер при измении\n\t */\n\tsendChangesToServer(tableName, recordId) {\n\t\tlet data = { 'pbx-table-id': tableName, 'pbx-row-id':  recordId};\n\t\tlet notEmpty = false;\n\t\t$(\"tr#\"+recordId + ' .' + inputClassName).each(function (index, obj) {\n\t\t\tlet colName = $(obj).attr('colName');\n\t\t\tif(colName !== undefined){\n\t\t\t\tdata[$(obj).attr('colName')] = $(obj).val();\n\t\t\t\tif($(obj).val() !== ''){\n\t\t\t\t\tnotEmpty = true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(notEmpty === false){\n\t\t\treturn;\n\t\t}\n\t\t$(\"tr#\"+recordId+\" .user.circle\").removeClass('user circle').addClass('spinner loading');\n\t\t$.api({\n\t\t\turl: window[className].saveTableAJAXUrl,\n\t\t\ton: 'now',\n\t\t\tmethod: 'POST',\n\t\t\tdata: data,\n\t\t\tsuccessTest(response) {\n\t\t\t\treturn response !== undefined && Object.keys(response).length > 0 && response.success === true;\n\t\t\t},\n\t\t\tonSuccess(response) {\n\t\t\t\tif (response.data !== undefined) {\n\t\t\t\t\tlet rowId = response.data['pbx-row-id'];\n\t\t\t\t\tlet table = $('#'+response.data['pbx-table-id']+'-table');\n\t\t\t\t\ttable.find(\"tr#\" + rowId + \" input\").attr('readonly', true);\n\t\t\t\t\ttable.find(\"tr#\" + rowId + \" div\").removeClass('changed-field loading').addClass('transparent');\n\t\t\t\t\ttable.find(\"tr#\" + rowId + \" .spinner.loading\").addClass('user circle').removeClass('spinner loading');\n\n\t\t\t\t\tif (rowId !== response.data['newId']){\n\t\t\t\t\t\t$(`tr#${rowId}`).attr('id', response.data['newId']);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonFailure(response) {\n\t\t\t\tif (response.message !== undefined) {\n\t\t\t\t\tUserMessage.showMultiString(response.message);\n\t\t\t\t}\n\t\t\t\t$(\"tr#\" + recordId + \" .spinner.loading\").addClass('user circle').removeClass('spinner loading');\n\t\t\t},\n\t\t\tonError(errorMessage, element, xhr) {\n\t\t\t\tif (xhr.status === 403) {\n\t\t\t\t\twindow.location = globalRootUrl + \"session/index\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Change some form elements classes depends of module status\n\t */\n\tcheckStatusToggle() {\n\t\tif (window[className].$statusToggle.checkbox('is checked')) {\n\t\t\twindow[className].$disabilityFields.removeClass('disabled');\n\t\t\twindow[className].$moduleStatus.show();\n\t\t} else {\n\t\t\twindow[className].$disabilityFields.addClass('disabled');\n\t\t\twindow[className].$moduleStatus.hide();\n\t\t}\n\t},\n\t/**\n\t * Send command to restart module workers after data changes,\n\t * Also we can do it on TemplateConf->modelsEventChangeData method\n\t */\n\tapplyConfigurationChanges() {\n\t\twindow[className].changeStatus('Updating');\n\t\t$.api({\n\t\t\turl: `${Config.pbxUrl}/pbxcore/api/modules/`+className+`/reload`,\n\t\t\ton: 'now',\n\t\t\tsuccessTest(response) {\n\t\t\t\t// test whether a JSON response is valid\n\t\t\t\treturn Object.keys(response).length > 0 && response.result === true;\n\t\t\t},\n\t\t\tonSuccess() {\n\t\t\t\twindow[className].changeStatus('Connected');\n\t\t\t},\n\t\t\tonFailure() {\n\t\t\t\twindow[className].changeStatus('Disconnected');\n\t\t\t},\n\t\t});\n\t},\n\t/**\n\t * We can modify some data before form send\n\t * @param settings\n\t * @returns {*}\n\t */\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = window[className].$formObj.form('get values');\n\t\treturn result;\n\t},\n\t/**\n\t * Some actions after forms send\n\t */\n\tcbAfterSendForm() {\n\t\twindow[className].applyConfigurationChanges();\n\t},\n\t/**\n\t * Initialize form parameters\n\t */\n\tinitializeForm() {\n\t\tForm.$formObj = window[className].$formObj;\n\t\tForm.url = `${globalRootUrl}${idUrl}/save`;\n\t\tForm.validateRules = window[className].validateRules;\n\t\tForm.cbBeforeSendForm = window[className].cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = window[className].cbAfterSendForm;\n\t\tForm.initialize();\n\t},\n\t/**\n\t * Update the module state on form label\n\t * @param status\n\t */\n\tchangeStatus(status) {\n\t\tswitch (status) {\n\t\t\tcase 'Connected':\n\t\t\t\twindow[className].$moduleStatus\n\t\t\t\t\t.removeClass('grey')\n\t\t\t\t\t.removeClass('red')\n\t\t\t\t\t.addClass('green');\n\t\t\t\twindow[className].$moduleStatus.html(globalTranslate.module_auto_dialerConnected);\n\t\t\t\tbreak;\n\t\t\tcase 'Disconnected':\n\t\t\t\twindow[className].$moduleStatus\n\t\t\t\t\t.removeClass('green')\n\t\t\t\t\t.removeClass('red')\n\t\t\t\t\t.addClass('grey');\n\t\t\t\twindow[className].$moduleStatus.html(globalTranslate.module_auto_dialerDisconnected);\n\t\t\t\tbreak;\n\t\t\tcase 'Updating':\n\t\t\t\twindow[className].$moduleStatus\n\t\t\t\t\t.removeClass('green')\n\t\t\t\t\t.removeClass('red')\n\t\t\t\t\t.addClass('grey');\n\t\t\t\twindow[className].$moduleStatus.html(`<i class=\"spinner loading icon\"></i>${globalTranslate.module_auto_dialerUpdateStatus}`);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\twindow[className].$moduleStatus\n\t\t\t\t\t.removeClass('green')\n\t\t\t\t\t.removeClass('red')\n\t\t\t\t\t.addClass('grey');\n\t\t\t\twindow[className].$moduleStatus.html(globalTranslate.module_auto_dialerDisconnected);\n\t\t\t\tbreak;\n\t\t}\n\t},\n};\n\n$(document).ready(() => {\n\twindow[className].initialize();\n});\n\n"],"file":"module-auto-dialer-index.js"}