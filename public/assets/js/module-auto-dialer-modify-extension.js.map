{"version":3,"sources":["src/module-auto-dialer-modify-extension.js"],"names":["idUrl","idForm","baseUrl","window","location","protocol","hostname","port","ModuleAutoDialer","$formObj","$","$checkBoxes","$dropDowns","validateRules","initialize","removeClass","accordion","checkbox","dropdown","initializeForm","tab","calculatePageLength","rowHeight","$pollingTable","find","first","outerHeight","windowHeight","innerHeight","headerFooterHeight","Math","max","floor","cbBeforeSendForm","settings","result","data","form","cbAfterSendForm","response","success","val","id","newUrl","history","pushState","path","Extensions","cbOnDataChanged","Form","url","globalRootUrl","document","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 11 2018\n *\n */\nconst idUrl     = 'module-auto-dialer';\nconst idForm    = 'extension-form';\nlet baseUrl = window.location.protocol + '//' + window.location.hostname;\nif (window.location.port) {\n\tbaseUrl += ':' + window.location.port;\n}\n/* global globalRootUrl, globalTranslate, Form, Config */\nconst ModuleAutoDialer = {\n\t$formObj: $('#'+idForm),\n\t$checkBoxes: $('#'+idForm+' .ui.checkbox'),\n\t$dropDowns: $('#'+idForm+' .ui.dropdown'),\n\t/**\n\t * Field validation rules\n\t * https://semantic-ui.com/behaviors/form.html\n\t */\n\tvalidateRules: {\n\t},\n\t/**\n\t * On page load we init some Semantic UI library\n\t */\n\tinitialize() {\n\t\t$('#content-frame').removeClass('segment');\n\t\t$('.ui.accordion').accordion();\n\t\t// инициализируем чекбоксы и выподающие менюшки\n\t\tModuleAutoDialer.$checkBoxes.checkbox();\n\t\tModuleAutoDialer.$dropDowns.dropdown();\n\t\tModuleAutoDialer.initializeForm();\n\t\t$('.menu .item').tab();\n\t},\n\n\tcalculatePageLength() {\n\t\tlet rowHeight = ModuleAutoDialer.$pollingTable.find('tbody > tr').first().outerHeight();\n\t\tconst windowHeight = window.innerHeight;\n\t\tconst headerFooterHeight = 400 ;\n\t\treturn Math.max(Math.floor((windowHeight - headerFooterHeight) / rowHeight), 5);\n\t},\n\n\t/**\n\t * We can modify some data before form send\n\t * @param settings\n\t * @returns {*}\n\t */\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = ModuleAutoDialer.$formObj.form('get values');\n\t\treturn result;\n\t},\n\t/**\n\t * Some actions after forms send\n\t */\n\tcbAfterSendForm(response) {\n\t\tif(response.success){\n\t\t\t$('input[name=\"id\"]').val(response.id);\n\t\t\tlet newUrl = baseUrl + '/admin-cabinet/module-auto-dialer/modifyExtension/'+response.id;\n\t\t\twindow.history.pushState({path: newUrl}, '', newUrl);\n\t\t}\n\t\tExtensions.cbOnDataChanged();\n\t},\n\t/**\n\t * Initialize form parameters\n\t */\n\tinitializeForm() {\n\t\tForm.$formObj = ModuleAutoDialer.$formObj;\n\t\tForm.url = `${globalRootUrl}${idUrl}/saveExtension`;\n\t\tForm.validateRules = ModuleAutoDialer.validateRules;\n\t\tForm.cbBeforeSendForm = ModuleAutoDialer.cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = ModuleAutoDialer.cbAfterSendForm;\n\t\tForm.initialize();\n\t}\n};\n\n$(document).ready(() => {\n\tModuleAutoDialer.initialize();\n});\n\n"],"file":"module-auto-dialer-modify-extension.js"}